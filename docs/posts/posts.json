[
  {
    "path": "posts/2022-02-19-project/",
    "title": "Project",
    "description": "This is an example of an assignment I would do in ESM 244.",
    "author": [
      {
        "name": "Margaret Hammond",
        "url": {
          "https://github.com/mbhammond/a2_hammond_margaret": {}
        }
      }
    ],
    "date": "2022-02-19",
    "categories": [],
    "contents": "\r\n1. Overview\r\nThis data focuses on the survival, growth and biomass estimates of two dominant palmetto species, Serenoa repens and Sabal etonia, populations in south-centra Florida from 1981-2017. In this task, I will be doing a binary linear regression model using plant height, canopy length, canopy width, and green leaves as predictor variables.\r\n2. Explore the Data\r\n2.1 Read and Wrangle the Data\r\n\r\n\r\nhide\r\n\r\npalmetto <- read_csv(here(\"data\", \"palmetto.csv\"))\r\n\r\n# species 1 is serenoa repends, species 2 is sabal etonia\r\n\r\n# subset of height, length, width, green_lvs\r\n\r\npalmetto_sub <- palmetto %>% \r\n  select(species, height, length, width, green_lvs) %>% \r\n  mutate(species = case_when(\r\n    species == \"1\" ~ \"0\", #serenoa repends now 0\r\n    species == \"2\" ~ \"1\" #sabal etonia now 1\r\n  )) %>% \r\n  drop_na()\r\n\r\npalmetto_sub$species <- as.factor(palmetto_sub$species)\r\n\r\n\r\n# class(palmetto_sub$species) checking the class of the species\r\n\r\n\r\n\r\n2.2 Data Visualization\r\nExplore differences in height, canopy length, canopy width, and green leaves for the two palmetto species.\r\n\r\n\r\nhide\r\n\r\npalmetto_plot <- palmetto_sub %>% \r\n  mutate(species = case_when(\r\n    species == \"0\" ~ \"Serenoa repends\", #serenoa repends now 0\r\n    species == \"1\" ~ \"Sabal etonia\" #sabal etonia now 1\r\n  ))\r\n  \r\nheight_plot <- ggplot(data = palmetto_sub, aes(x = species, y = height, color = species)) +\r\n  geom_quasirandom(size = 0.5)\r\n\r\nlength_plot <- ggplot(data = palmetto_plot, aes(x = species, \r\n                                                 y = length, \r\n                                                 color = species)) +\r\n  geom_quasirandom(size = 0.5, show.legend = FALSE) +\r\n  scale_color_manual(values = c(\"dark green\", \"purple\")) +\r\n  labs(x = \"Species\",\r\n       y = \"Length of Canopy (cm)\",\r\n       title = \"Length of Canopy of Palmetto Species\",\r\n       caption = \"Figure 1. South-Central Palmetto species Serenoa repends \r\n       and Sabal etonia length of canopy (cm) from 1981-2017 (Abrahamson 2019)\") \r\n\r\nwidth_plot <- ggplot(data = palmetto_sub, aes(x = species, y = width, color = species)) +\r\n  geom_quasirandom(size = 0.5)\r\n\r\ngreen_plot <- ggplot(data = palmetto_plot, aes(x = species, y = green_lvs, color = species)) +\r\n  geom_quasirandom(size = 0.5, show.legend = FALSE) +\r\n  scale_color_manual(values = c(\"dark green\", \"purple\")) +\r\n  labs(x = \"Species\",\r\n       y = \"Count of Green Leaves\",\r\n       title = \"Amount of Green Leaves on Palmetto Species\", \r\n       caption = \"Figure 2. South-Central Palmetto species Serenoa repends \r\n       and Sabal etonia count of green leaves from 1981-2017 (Abrahamson 2019)\") \r\n\r\n# species 1 is serenoa repends, species 2 is sabal etonia\r\n\r\n# length and green_lvs are the most different between the two species\r\n\r\nlength_plot / green_plot\r\n\r\n\r\n\r\n\r\nFor data visualization, I chose to show the difference between the two species for canopy length (cm) and green leaves count. These two variables had the biggest differences in means, and will be important predictor variables in the binary logistic regression models.\r\n3. Binary Logistic Regression\r\nCreate a binary logistic regression model for the two palmetto species, using log odds of species using plant height, canopy length, canopy width, and green leaves as predictor variables. Based on the results of the cross validation, a model will be chosen as the better binary logistic regression model.\r\n2.1 Create the Binary Logistic Regression Models\r\n\r\n\r\nhide\r\n\r\nf1 <- species ~ height + length + width + green_lvs\r\n\r\nspec_blr1 <- glm(formula = f1,\r\n                 data = palmetto_sub,\r\n                 family = \"binomial\")\r\n\r\nf2 <- species ~ height + width + green_lvs\r\n\r\nspec_blr2 <- glm(formula = f2,\r\n                 data = palmetto_sub,\r\n                 family = \"binomial\")\r\n\r\n# class(palmetto_sub$species)\r\n# levels(palmetto_sub$species)\r\n# 0 is 0, 1 is 1. Serona is 0.\r\n\r\n\r\n\r\n# summary(spec_blr1)\r\n# summary(spec_blr2)\r\n\r\nblr1_tidy <- tidy(spec_blr1)\r\nblr2_tidy <- tidy(spec_blr2)\r\n\r\n# aictab(list(spec_blr1, spec_blr2))\r\n\r\n\r\n\r\n2.2 Use caret\r\nUse the package caret to do k-fold validation of the binary logistic regression model.\r\n\r\n\r\nhide\r\n\r\nset.seed(123)\r\n\r\ntr_ctrl <- trainControl(method = \"repeatedcv\",\r\n                        number = 10, repeats = 10)\r\n\r\n# Train the model\r\nmodel1 <- train(f1, data = palmetto_sub,\r\n                method = \"glm\",\r\n                family = \"binomial\",\r\n                trControl = tr_ctrl)\r\n#model1\r\n\r\nmodel2 <- train(f2, data = palmetto_sub,\r\n                method = \"glm\",\r\n                family = \"binomial\",\r\n                trControl = tr_ctrl)\r\n\r\n\r\n\r\n2.3 Table of Model 1\r\nCreate a table of model 1, chosen because had a better AIC score. This table shows the coefficients used in the Model 1 binary logistic regression.\r\n\r\n\r\nhide\r\n\r\nspec_blr1_tidy <- tidy(spec_blr1)\r\n\r\nspec_blr1_tidy$p.value <- ifelse(spec_blr1_tidy$p.value < .001, paste('< .001'))\r\n\r\n# 0 is Serenoa repens\r\n# 1 is Sabal etonia \r\nspec_blr1_tidy %>% \r\n  kable(col.names = c(\"Term\",\r\n                      \"Estimate\",\r\n                      \"Standard Error\",\r\n                      \"Statistic\",\r\n                      \"P Value\"),\r\n        caption = 'Table 1. Binary logistic regression model results for model 1, a model of plant species as a function of height, canopy length, canopy width an green leaves') %>% \r\n  kable_classic(bootstrap_options = \"striped\", full_width = FALSE)\r\n\r\n\r\n\r\nTable 1: Table 1. Binary logistic regression model results for model 1, a model of plant species as a function of height, canopy length, canopy width an green leaves\r\n\r\n\r\nTerm\r\n\r\n\r\nEstimate\r\n\r\n\r\nStandard Error\r\n\r\n\r\nStatistic\r\n\r\n\r\nP Value\r\n\r\n\r\n(Intercept)\r\n\r\n\r\n3.2266851\r\n\r\n\r\n0.1420708\r\n\r\n\r\n22.71180\r\n\r\n\r\n< .001\r\n\r\n\r\nheight\r\n\r\n\r\n-0.0292173\r\n\r\n\r\n0.0023061\r\n\r\n\r\n-12.66984\r\n\r\n\r\n< .001\r\n\r\n\r\nlength\r\n\r\n\r\n0.0458233\r\n\r\n\r\n0.0018661\r\n\r\n\r\n24.55600\r\n\r\n\r\n< .001\r\n\r\n\r\nwidth\r\n\r\n\r\n0.0394434\r\n\r\n\r\n0.0021000\r\n\r\n\r\n18.78227\r\n\r\n\r\n< .001\r\n\r\n\r\ngreen_lvs\r\n\r\n\r\n-1.9084747\r\n\r\n\r\n0.0388634\r\n\r\n\r\n-49.10728\r\n\r\n\r\n< .001\r\n\r\n\r\nProbability Calculations\r\nUse broom::augment to find the probabilities for each plant in the original dataset, and add a column for which species your model would classify that plant as (using a 50% cutoff).\r\n3. Model 1 Predictions\r\nCreate a table showing model 1â€™s ability to predict the palmetto species using binary linear regression.\r\n\r\n\r\nhide\r\n\r\n# 0 is Serenoa repens\r\n# 1 is Sabal etonia \r\n\r\nspec_blr1_fitted <- spec_blr1 %>% \r\n  augment(type.predict = \"response\") %>% \r\n  mutate(predict_species = case_when(\r\n    .fitted > .5 ~ \"1\", # probability over .5, higher chance it will be species 1, Sabal etonia\r\n    .fitted < .5 ~ \"0\"), # probability below .5, low chance it is Sabal etonia, assigned to Serenoa repens\r\n  accuracy = case_when(\r\n    species == predict_species ~ 1, # accurate results\r\n    species != predict_species ~ 0), # innacurate results\r\n  correct = case_when(\r\n    accuracy == 1 ~ 'y',\r\n    accuracy == 0 ~ 'n'\r\n  ))\r\n\r\n\r\naccuracy_sum <- spec_blr1_fitted %>% \r\n  group_by(species) %>% \r\n  summarize(accuracy = mean(accuracy, na.rm = TRUE) * 100)\r\n\r\ncorrect_sum <- spec_blr1_fitted %>% \r\n  group_by(correct, species) %>% \r\n  summarize(count = n()) %>% \r\n  pivot_wider(names_from = correct,\r\n              values_from = count)\r\n\r\n\r\ncorrect_final <- cbind(correct_sum, accuracy_sum) %>% \r\n  select(!1) %>% \r\n  mutate(species = case_when(\r\n    species == 1 ~ 'Sabal etonia',\r\n    species == 0 ~ 'Serenoa repens'\r\n  ))  \r\n  \r\ncorrect_final <-correct_final[, c(3, 1, 2, 4)]\r\n\r\n\r\n  \r\n#spec_count_right <- spec_blr1_fitted %>% \r\n # count(predict_species, species)\r\n\r\n#spec_blr1_counts <- spec_blr1_fitted %>% \r\n # tabyl(species, predict_species)\r\n\r\n#spec_proportions <- spec_blr1_counts %>% \r\n # mutate(species = case_when(\r\n  #  species == \"0\" ~ \"Serenoa repens\",\r\n   # species == \"1\" ~ \"Sabal etonia\")) %>% \r\n#  adorn_percentages() %>% \r\n # adorn_pct_formatting(digits = 2) %>% \r\n  #adorn_ns()\r\n\r\ncorrect_final %>% \r\n  kable(col.names = c(\r\n    \"Species\",\r\n    \"Amount Incorrect\",\r\n    'Amount Correct',\r\n    \"Percent Correct\"),\r\n    caption = \"Table 2. Probability of correct Sabal etonia and Serenoa repens species as predicted by Model 1.\",\r\n    digits = 2) %>% \r\n  kable_classic(bootstrap_options = \"striped\", full_width = FALSE)\r\n\r\n\r\n\r\nTable 2: Table 2. Probability of correct Sabal etonia and Serenoa repens species as predicted by Model 1.\r\n\r\n\r\nSpecies\r\n\r\n\r\nAmount Incorrect\r\n\r\n\r\nAmount Correct\r\n\r\n\r\nPercent Correct\r\n\r\n\r\nSerenoa repens\r\n\r\n\r\n564\r\n\r\n\r\n5548\r\n\r\n\r\n90.77\r\n\r\n\r\nSabal etonia\r\n\r\n\r\n454\r\n\r\n\r\n5701\r\n\r\n\r\n92.62\r\n\r\n\r\n3.1 Probability Calculations Conclusion\r\nModel 1 was able to predict 90.77% correct for Serenoa repens and 92.62% for Sabal etonia. Model 1 was able to predict the plant species based off of the predictor variables relatively well.\r\nData Citation\r\nAbrahamson, W.G. 2019. Survival, growth and biomass estimates of two dominant palmetto species of south-central Florida from 1981 - 2017, ongoing at 5-year intervals ver 1. Environmental Data Initiative. https://doi.org/10.6073/pasta/f2f96ec76fbbd4b9db431c79a770c4d5\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-02-19-project/project_files/figure-html5/unnamed-chunk-2-1.png",
    "last_modified": "2022-02-19T15:49:41-08:00",
    "input_file": "project.knit.md"
  },
  {
    "path": "posts/2022-02-07-welcome/",
    "title": "Welcome",
    "description": "This is me welcoming everyone! Yay!",
    "author": [
      {
        "name": "Margaret Hammond",
        "url": {}
      }
    ],
    "date": "2022-02-07",
    "categories": [],
    "contents": "\r\nHey everybody! Hope youâ€™re having a great day! Woohoo!\r\nDistill is a publication format for scientific and technical writing, native to the web.\r\nLearn more about using Distill at https://rstudio.github.io/distill.\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2022-02-07T14:28:41-08:00",
    "input_file": {}
  }
]
